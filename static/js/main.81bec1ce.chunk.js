(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(37)},31:function(e,t,a){},33:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),c=a.n(o),l=a(4),i=a(7),s=a(11),u=a(21),p={show:Array(10).fill(1).map(function(){return{title:"n/a",year:"n/a",genres:"n/a",homepage:"n/a",network:"n/a",imgRef:""}}),activePage:1,maxPage:0,selector:{showname:"",year:"",genres:""},isLoading:!1};var m=Object(s.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BEGIN_REQUEST":return{show:e.show.map(function(e){return{title:e.title,year:e.year,genres:e.genres,homepage:e.homepage,network:e.network,imgRef:""}}),activePage:e.activePage,maxPage:e.maxPage,selector:Object(i.a)({},e.selector),isLoading:!0};case"UPDATE":return{show:t.response,activePage:t.page,maxPage:t.maxPage,selector:Object(i.a)({},t.selector),isLoading:!1};case"ERROR":return alert("External error. Can't perform action. Try another request"),Object(i.a)({},e,{isLoading:!1});default:return e}},Object(s.a)(u.a)),h=(a(31),a(33),a(1)),g=a(2),v=a(6),d=a(3),f=a(5),b=a(12),E=a.n(b),y=a(15);function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{showname:"",year:"",genres:""};e({type:"BEGIN_REQUEST"});var n="page="+t+"&query="+a.showname+"&years="+a.year+"&genres="+a.genres,r="https://api.trakt.tv/shows/popular?".concat(n,"&extended=full"),o={method:"GET",headers:{"Content-Type":"application/json","trakt-api-version":"2","trakt-api-key":"094e531346ad44623adad1d303859ba4bd981a6ea4f60912a38a9d27dca7818d"}};function c(){return(c=Object(y.a)(E.a.mark(function n(){var c,s,u,p,m,h;return E.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch(r,o);case 3:return c=n.sent,n.next=6,c.json();case 6:s=n.sent,u=+c.headers.get("X-Pagination-Page-Count"),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0.message),e({type:"ERROR"});case 14:return n.prev=14,n.next=17,Promise.all(s.map(function(e){return l("https://api.themoviedb.org/3/tv/".concat(e.ids.tmdb,"/images?api_key=199bb1bdaaf09ba68436c8d29c61b489&include_image_language=en,null"))}));case 17:p=n.sent,n.next=23;break;case 20:n.prev=20,n.t1=n.catch(14),console.log(n.t1.message);case 23:for(m=[],h=0;h<s.length;h++)m.push({title:s[h].title,year:s[h].year,genres:s[h].genres.join(", "),homepage:s[h].homepage,network:s[h].network,imgRef:p[h]});e({type:"UPDATE",response:m,page:t,maxPage:u,selector:Object(i.a)({},a)});case 27:case"end":return n.stop()}},n,this,[[0,10],[14,20]])}))).apply(this,arguments)}function l(e){return s.apply(this,arguments)}function s(){return(s=Object(y.a)(E.a.mark(function e(t){var a,n,r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="",e.prev=1,e.next=4,fetch(t);case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,a="https://image.tmdb.org/t/p/w342/".concat(r.posters[0].file_path),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0.message);case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}},e,this,[[1,11]])}))).apply(this,arguments)}(function(){return c.apply(this,arguments)})().catch(function(e){return alert(e.message+". External error")})}var k=function(e){function t(){return Object(h.a)(this,t),Object(v.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(g.a)(t,[{key:"handleClick",value:function(e,t,a,n){var r=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)+t-(t-1)%10,o=t-1>=1?t-1:1,c=t+1>a?a:t+1;switch(e){case"back":if(o===t)break;this.props.dispatch(function(e){return w(e,o,n)});break;case"pages":if(r===t)break;this.props.dispatch(function(e){return w(e,r,n)});break;case"forward":if(c===t)break;this.props.dispatch(function(e){return w(e,c,n)})}}},{key:"render",value:function(){var e=this,t=this.props.activePage,a=this.props.selector,n=this.props.maxPage,o=0,c=n%10;return c>0&&n-t<c?o=c:n>0&&(o=10),r.a.createElement("div",{className:"pagContainer"},r.a.createElement("div",{className:"Pagination",onClick:function(){return e.handleClick("back",t,n,a)}},"<<"),Array(o).fill(1).map(function(o,c){return r.a.createElement("div",{className:t===c+1+(t-1)-(t-1)%10?"activePagination":"Pagination",key:"key"+c,onClick:function(){return e.handleClick("pages",t,n,a,c)}},c+1+(t-1)-(t-1)%10)}),r.a.createElement("div",{className:"Pagination",onClick:function(){return e.handleClick("forward",t,n,a)}},">>"))}}]),t}(n.Component),j=Object(l.b)(function(e){return{activePage:e.activePage,maxPage:e.maxPage,selector:e.selector}})(k);function O(e){var t=Array(7).fill(1);return r.a.createElement("tr",null,t.map(function(t,a){var n=0;switch(a){case 0:n=e.ind;break;case 1:n=e.show.imgRef?r.a.createElement("img",{src:e.show.imgRef,alt:"poster"}):"no poster";break;case 2:n=e.show.title;break;case 3:n=e.show.year;break;case 4:n=e.show.genres;break;case 5:n=r.a.createElement("a",{href:e.show.homepage},e.show.homepage);break;case 6:n=e.show.network;break;default:n="..."}return r.a.createElement("td",{key:a},n)}))}function P(e){return r.a.createElement("tbody",null,Array(e.show.length).fill(1).map(function(t,a){return r.a.createElement(O,{key:a,ind:a+1+10*(e.page-1),show:e.show[a]})}))}function C(e){return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Number"),r.a.createElement("th",null,"Poster"),r.a.createElement("th",null,"Show Name"),r.a.createElement("th",null,"year"),r.a.createElement("th",null,"genges"),r.a.createElement("th",null,"homepage"),r.a.createElement("th",null,"network")))}var x=function(e){function t(){return Object(h.a)(this,t),Object(v.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.props.getStartPage(1)}},{key:"render",value:function(){var e=this;return r.a.createElement("table",{onClick:function(){e.props.getInfoFromStore(),console.log(e.props.activePage)}},r.a.createElement(C,{searchList:this.props.getFoundList,page:this.props.activePage,selector:this.props.selector}),r.a.createElement(P,{show:this.props.show,page:this.props.activePage}))}}]),t}(r.a.Component),S=Object(l.b)(function(e,t){return e},function(e){return{getInfoFromStore:function(){return e({type:"GET_INFO"})},getStartPage:function(t){return e(function(){return w(e,t)})},getFoundList:function(t,a){return e(function(){return w(e,t,a)})}}})(x),R=a(8);var N=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(v.a)(this,Object(d.a)(t).call(this,e))).showValue=r.a.createRef(),a.yearValue=r.a.createRef(),a.genresValue=r.a.createRef(),a.handleSelectChange=a.handleSelectChange.bind(Object(R.a)(Object(R.a)(a))),a.handleFormChange=a.handleFormChange.bind(Object(R.a)(Object(R.a)(a))),a}return Object(f.a)(t,e),Object(g.a)(t,[{key:"handleSelectChange",value:function(e){var t=Object(i.a)({},this.props.selector);t.genres=e.target.value,this.props.dispatch(function(e){return w(e,1,t)})}},{key:"handleFormChange",value:function(e){var t={showname:this.showValue.current.value,year:this.yearValue.current.value,genres:this.genresValue.current.value};this.props.dispatch(function(e){return w(e,1,t)}),e.preventDefault()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleFormChange,className:"SearchForm"},r.a.createElement("div",null,r.a.createElement("label",null,"Search for name, description:"),r.a.createElement("input",{type:"text",ref:this.showValue})),r.a.createElement("div",null,r.a.createElement("label",null,"Search for year:"),r.a.createElement("input",{type:"text",ref:this.yearValue})),r.a.createElement("div",null,r.a.createElement("label",null,"Search for genres:"),r.a.createElement("select",{defaultValue:"",onChange:this.handleSelectChange,ref:this.genresValue},r.a.createElement("option",{value:""},"All genres"),r.a.createElement("option",{value:"action"},"Action"),r.a.createElement("option",{value:"drama"},"Drama"),r.a.createElement("option",{value:"animation"},"Animation"),r.a.createElement("option",{value:"mystery"},"Mystery"),r.a.createElement("option",{value:"adventure"},"Adventure"),r.a.createElement("option",{value:"fantasy"},"Fantasy"),r.a.createElement("option",{value:"superhero"},"Superhero"),r.a.createElement("option",{value:"comedy"},"Comedy"),r.a.createElement("option",{value:"children"},"Children"),r.a.createElement("option",{value:"science-fiction"},"Science-fiction"),r.a.createElement("option",{value:"anime"},"Anime"),r.a.createElement("option",{value:"crime"},"Crime"),r.a.createElement("option",{value:"suspense"},"Suspense"),r.a.createElement("option",{value:"thriller"},"Thriller"),r.a.createElement("option",{value:"music"},"Music"),r.a.createElement("option",{value:"soap"},"Soap"),r.a.createElement("option",{value:"documentary"},"Documentary"),r.a.createElement("option",{value:"talk-show"},"Talk-show"),r.a.createElement("option",{value:"reality"},"Reality"),r.a.createElement("option",{value:"special-interest"},"Special-interest"),r.a.createElement("option",{value:"romance"},"Romance"),r.a.createElement("option",{value:"western"},"Western"),r.a.createElement("option",{value:"history"},"History"),r.a.createElement("option",{value:"war"},"War"),r.a.createElement("option",{value:"horror"},"Horror"))),r.a.createElement("input",{type:"submit",value:"Search"})))}}]),t}(r.a.Component),A=Object(l.b)(function(e){return{selector:e.selector}})(N);var F=function(e){function t(){return Object(h.a)(this,t),Object(v.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e="Invisible";return e=this.props.isLoading?"loader":"Invisible",r.a.createElement("div",{className:""},r.a.createElement("div",{className:e},"Loading",r.a.createElement("div",{className:"loading1"}),r.a.createElement("div",{className:"loading2"}),r.a.createElement("div",{className:"loading3"})))}}]),t}(r.a.Component),L=Object(l.b)(function(e){return{isLoading:e.isLoading}})(F),T=function(e){function t(){return Object(h.a)(this,t),Object(v.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",{className:"Header"},"Popular TV shows"),r.a.createElement(A,null),r.a.createElement(S,null),r.a.createElement(j,null),r.a.createElement(L,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(l.a,{store:m},r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,2,1]]]);
//# sourceMappingURL=main.81bec1ce.chunk.js.map